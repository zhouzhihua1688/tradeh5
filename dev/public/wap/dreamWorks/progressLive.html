<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>天天向上直播间</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/swiper-4.2.2.min.css">
    <script src="js/base.js"></script>
    <script type="text/javascript" src="/tradeh5/newWap/base/js/baseHead.js"></script>
    <script type="text/javascript" src="/tradeh5/newWap/base/js/needLogin.js"></script>
<script>
        // 相对字体大小设置
        var oHtml = document.documentElement;
        getFont();
        window.onresize = function () {
            getFont();
        }

        function getFont() {
            var screenWidth = oHtml.clientWidth;
            if (screenWidth <= 320) {
                oHtml.style.fontSize = '17.06px';
            } else if (screenWidth >= 750) {
                oHtml.style.fontSize = '40px';
            } else {
                oHtml.style.fontSize = screenWidth / (750 / 40) + 'px';
            }
        }
</script>
<style>
    body,html{background: #1c2688;}
    body {left: 0%; right: 0%;font:14px 'PingFang SC','Microsoft YaHei', Tahoma, Arial, sans-serif;}
    button { outline: none;  }
          /* 图片自适应 */
    img {
              width: 100%;
              height: auto;
              width: auto\9; /* ie8 */
              -ms-interpolation-mode: bicubic;/*为了照顾ie图片缩放失真*/
              border: none;
              vertical-align: top;
              outline: none;
              display: block;
    }
    p { word-wrap: break-word; text-align: justify; }
    table { width: 100%;border-collapse:collapse; }
    .main{width:100%;background: #fff;}
    .dream{width:100%;height:13.15rem;background:url(img/dream_02.png) no-repeat;background-size:100% 100%;}
    .dream .text{padding-top:0.35rem;padding-left:2.5rem;}
    .dream .text .right{font-size: 0.9rem;color:#fff;}
    .dream .text .left{font-size:0.65rem;color:#fff;}
    .swiper-pagination-bullet{
            opacity: 1;
            height:8px;
            background: #a0b7f9;
        }
  .swiper-pagination-bullet-active {
      opacity: 1;
      width:0.75rem;
      height:8px;
      border-radius:50px;
      background: #ffd559;
  }
/*   .swiper-container {
       position: relative;
         width: 100%;
         height:10rem;
      } */
 /*  .swiper-slide {
       text-align: center;
       font-size: 18px;
       background: #eee;
       display: flex;
       justify-content: center;
       align-items: center;
       transition: 300ms;
       transform: scale(0.8);
     } */

    .dream .swiper-slide{
       /*  border-radius:10px;
        width:16.75rem;
        height:9.75rem; */
        transform: scale(0.8);
    }
    .dream .swiper-slide img{
      width:16.75rem;
      height:9.75rem;
      margin: 0 auto;
      border-radius:10px;
      /* margin-left: 20px; */
    }
    .dream .swiper-slide-active,.dream .swiper-slide-duplicate-active{transform: scale(1);}
    .dreamUp{width:100%;height:2.4rem;background:url(img/dream_03.png) no-repeat;
      background-size:100% 100%;display: flex;justify-content: space-between;align-items: center;margin-top:-0.1rem;}
    .dreamUp div{height:2rem;width:50%;color:#fff;font-size:0.9rem;text-align:center;margin-left:1rem;margin-top:0.35rem;}
    .dreamUp div:nth-of-type(2){width:5rem;height:2rem;}
    .dreamList{width:100%;height:2.675rem;background:url(img/dream_04.png) no-repeat;
      background-size:100% 100%;overflow-x: auto;white-space: nowrap;padding-top:1.25rem;}
    .dreamIcon{width:5.0rem;height:2.25rem;background: url('img/tipBlue.png') no-repeat;background-size: 100% 100%;margin-left:0.55rem;display: inline-block;}
    .dreamList div.active{width:5.0rem;height:2.25rem;background: url('img/tipYellow.png') no-repeat;background-size: 100% 100%;margin-left:0.75rem;display: inline-block;text-shadow: #be5e00 0px 1px 2px;}
    .dreamList div{position: relative;}
    .dreamList div .one{position: absolute;top:0.2rem;left:0.75rem;font-size:0.7rem;color:#fff;font-weight: bold;overflow-x: auto;width:3.5rem;}
    .dreamList div .two{position: absolute;bottom:0.3rem;display:block;left:50%;font-size:0.6rem;color:#fff;text-align:center;margin-left:-1.5rem;}
    .dreamTv{width:100%;height:100%;background: url('img/tv.png') no-repeat;background-size: 100% 100%;margin-top:-0.05rem;}

    .dreamTv .swiper-slide{width:14.0rem;height:7.5rem;margin-top:0.75rem;}
    .dreamTv .swiper-slide img{width:14.0rem;height:6rem;margin-left:1.5rem;border:2px solid #000;border-radius:0.25rem}
    .dreamTv .swiper-pagination-bullet{opacity: 1; width:0.45rem; height:0.45rem; background: #fff; border: 2px solid #0d0e55; }
    .dreamTv .swiper-pagination-bullet-active {opacity: 1; width:0.45rem; height:0.45rem; border-radius:50px; background: #f95350; }
    .dreamTv .swiper-container-horizontal>.swiper-pagination-bullets, .swiper-pagination-custom, .swiper-pagination-fraction {position: absolute; bottom:5px; left:6.25rem; width: 100%; }
    .moreList{width:100%;padding:1rem 0rem;background:url(img/dream_04.png) no-repeat;
    background-size:100% 100%;margin-top:-0.1rem;padding-top:0.85rem;}
    .moreList .listImg{width:17.25rem;height:8.125rem;margin:0 auto;box-shadow: -1px -1px 10px #0d0e55;margin-bottom:0.75rem;position:relative;}
    .moreList .listImg img{width:17.25rem;height:8.125rem;border-radius: 0.25rem;border:2px solid #0d0e55;}
    .moreList .listImg .left{position:absolute;bottom:0.35rem;left:0.25rem;font-size: 0.6rem;color:#fff;opacity:0.8}
    .moreList .listImg .right{position:absolute;bottom:0.35rem;right:0.25rem;font-size: 0.6rem;color:#fff;opacity:0.8}
    .dreamFotter{width:100%;height:2.5rem;background:url(img/dream_04.png) no-repeat;
    background-size:100% 100%;margin-top:-0.1rem;text-align:center;color:#306aed;}
</style>
</head>
<body>
<div class="main">
    <div class="dreamList">
       <!-- <div class="dreamIcon active">
        <span class="one">添富星期二</span>
        <span class="two">大咖直播</span>
       </div>
       <div class="dreamIcon">
        <span class="one">添财演说家</span>
        <span class="two">基金脱口秀</span>
       </div>
       <div class="dreamIcon"></div>
       <div class="dreamIcon"></div>
       <div class="dreamIcon"></div> -->
    </div>
    <div class="moreList">
      <!-- <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div> -->
     <!--  <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div> -->
    </div>
    <div class="dreamFotter">已经到底了</div>
</div>
<script src="js/jquery.3.4.1.min.js"></script>
<script src="js/swiper-4.2.2.min.js"></script>
<script src="/tradeh5/newWap/base/js/utils.js"></script> 
<script>


 // var url = "http://local.99fund.com.cn:3000/tradeh5/newWap/Wap/dreamWorks/progressLive.html?tags=1";

 //  function getUrlParam(name) {
 //  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
 //  var r = window.location.search.substr(1).match(reg); //匹配目标参数
 //  if (r != null) return unescape(r[2]);
 //  return ''; //返回参数值
 //  }

 // var tags=this.getUrlParam("tags");

  var tags=utils.getUrlParam("tags");


  // var aa=decodeURIComponent(atob(tags))

  // var tags=decodeURIComponent(utils.getUrlParam("tags"));
  
  // var num=utils.getCookie("num");

  // var num=0;
  var infoList2=[];  //天天向上直播间 
  // 获取相关Id;
  function getInfo(){   
      utils.get('/res/v1/app-func-layout/location-info?layoutId=dreamWorksHome', null, function (result) {
            if (result.returnCode == 0) {
                infoList2=result.body.appLayoutFuncInfoList.filter(function(item) {//天天向上直播间
                 return item.temId=='dreamWorksTabVideoList';
                });
                infoList2.forEach(function(item){   //天天向上直播间
                    getAdviceRelateId2(item.temId,item.funcmodId); 
                })
        
                
            }else if (result && result.returnCode != 9999) {
                alert(result.returnMsg)
            }else {
                alert(result.returnMsg)
            }
      });
  }
  getInfo();

  // 获取天天向上直播间相关标签;
  function getAdviceRelateId2(temId,funcmodId){
      utils.get('/res/v1/app-func-layout/theme-infos-app?layoutId='+temId+'&funcModId='+funcmodId, null, function (result) {
            if (result.returnCode == 0) {
              var objList2=[];
              var objhtml2= "";
              if(result.body.length>0){
                  objList2=result.body[0].object;
                  objList2.forEach(function (item,index) {
                    objhtml2 += '<div class="dreamIcon" data="'+index+'"><span class="one">'+item.adviceTitle+'</span><span class="two">'+item.adviceDesc.substr(0,5)+'</span></div>'
                  })
              }else{
                var objhtml2= "";
              }
              
              $(".dreamList").html(objhtml2);
              
              
              // console.log(num);
             
              // if(num==0){
              //   $(".dreamIcon .one").parent().eq(num).addClass('active');
              

              //    getVideo2($(".one").eq(num).text());
              // }
              
              $(".dreamIcon .one").each(function(index, el) {   //传过来的参数是哪个，选中哪个值                             
                var str=[]
                str.push($(el).text());

                if(str.indexOf(tags) > -1){
                    $(el).parent().addClass('active');
                    getVideo2(tags);
                }

                // if($(el).text().includes(tags)){
                //   $(el).parent().addClass('active');
                //   getVideo2(tags);
                // }
              });
              
              // $(".dreamIcon").eq(0).addClass('active');
              // if($(".dreamIcon").eq(0).attr("data")==0){
              //   var str=$(".one").eq(0).text();
              //     getVideo2(str);
              // }

              $('.dreamList .dreamIcon').click(function () {
                  if ($(this).hasClass("active")) {
                      return;
                  }
                  $(this).addClass("active").siblings().removeClass('active');
                  var name=$(this).find('.one').text();
                  getVideo2(name);
              });
            }else if (result && result.returnCode != 9999) {
                alert(result.returnMsg)
            }else {
                alert(result.returnMsg)
            }
      });   
  }


  //天天向上直播间
  function getVideo2(tags) {
    console.log(tags);
    $(".moreList").html('');
      utils.get('/cms-service/v1/vedio/vedios-simple?tags='+tags, null, function (result) {
          if (result.returnCode == 0) {
              var list2=[];
              var html2= "";
              list2=result.body;
           
              for(var i=0;i<list2.length;i++){
                // html2 += '<div class="swiper-slide" style="position:relative"><a href="'+list2[i].detailUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left">'+list2[i].hits+'</span><span class="right">'+list2[i].mins+'</span></a></div>' 

              // html2 +='<div class="listImg"><a href="'+list2[i].detailUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left">'+list2[i].hits+'次播放</span><span class="right">'+list2[i].mins+':00</span></a></div>'


                  if(isApp()){
                        if(list2[i].detailUrl.slice(0, 13)!= 'htffundxjb://'&&list2[i].isLive==1){
                              
                              html2 +='<div class="listImg"><a href="'+list2[i].url+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                        }
                        else if(list2[i].detailUrl.slice(0, 13)!= 'htffundxjb://'&&list2[i].isLive==2){
                              
                              html2 +='<div class="listImg"><a href="htffundxjb://action?type=media&subType=liveXE&videoId='+ list2[i].videoId+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                          }
                        else{
                              html2 += '<div class="listImg"><a href="htffundxjb://action?type=url&link='+ btoa(list2[i].detailUrl)+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'

                          }
                    }else{
                        html2 += '<div class="listImg"><a href="'+list2[i].shareLinkUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                    }

              }
              
              $(".moreList").html(html2);

          }else if (result && result.returnCode != 9999) {
              alert(result.returnMsg)
          }else {
              alert(result.returnMsg)
          }
      });
    }

  var mySwiper = new Swiper ('.dreamTv .swiper-container', {
            direction: 'horizontal',
            loop: true,
            autoplay:30000,
            autoplay:{disableOnInteraction: false},
            // 如果需要分页器
            pagination: {
                el: '.swiper-pagination'
            }
  });

  // $('.dreamList .dreamIcon').click(function () {
  //     if ($(this).hasClass("active")) {
  //         return;
  //     }
  //     $(this).addClass("active").siblings().removeClass('active');
  //     // $(this).parent().next("qiehuan").hide().eq($(this).index()).show();
  //     // $(this).parent().siblings().hide().eq($(this).index()).show()
  // });

</script>
</body>
</html>