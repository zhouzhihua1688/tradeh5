<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>天天向上直播间</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/swiper-4.2.2.min.css">
    <script src="js/base.js"></script>
    <script type="text/javascript" src="/tradeh5/newWap/base/js/baseHead.js"></script>
    <script type="text/javascript" src="/tradeh5/newWap/base/js/needLogin.js"></script>
<script>
        // 相对字体大小设置
        var oHtml = document.documentElement;
        getFont();
        window.onresize = function () {
            getFont();
        }

        function getFont() {
            var screenWidth = oHtml.clientWidth;
            if (screenWidth <= 320) {
                oHtml.style.fontSize = '17.06px';
            } else if (screenWidth >= 750) {
                oHtml.style.fontSize = '40px';
            } else {
                oHtml.style.fontSize = screenWidth / (750 / 40) + 'px';
            }
        }
</script>
<style>
    body,html{background: #1c2688;}
    body {left: 0%; right: 0%;font:14px 'PingFang SC','Microsoft YaHei', Tahoma, Arial, sans-serif;}
    button { outline: none;  }
          /* 图片自适应 */
    img {
              width: 100%;
              height: auto;
              width: auto\9; /* ie8 */
              -ms-interpolation-mode: bicubic;/*为了照顾ie图片缩放失真*/
              border: none;
              vertical-align: top;
              outline: none;
              display: block;
    }
    p { word-wrap: break-word; text-align: justify; }
    table { width: 100%;border-collapse:collapse; }
    .main{width:100%;background: #fff;}
    .dream{width:100%;height:13.15rem;background:url(img/dream_02.png) no-repeat;background-size:100% 100%;}
    .dream .text{padding-top:0.35rem;padding-left:2.5rem;}
    .dream .text .right{font-size: 0.9rem;color:#fff;}
    .dream .text .left{font-size:0.65rem;color:#fff;}
    .swiper-pagination-bullet{
            opacity: 1;
            height:8px;
            background: #a0b7f9;
        }
  .swiper-pagination-bullet-active {
      opacity: 1;
      width:0.75rem;
      height:8px;
      border-radius:50px;
      background: #ffd559;
  }
/*   .swiper-container {
       position: relative;
         width: 100%;
         height:10rem;
      } */
 /*  .swiper-slide {
       text-align: center;
       font-size: 18px;
       background: #eee;
       display: flex;
       justify-content: center;
       align-items: center;
       transition: 300ms;
       transform: scale(0.8);
     } */

    .dream .swiper-slide{
       /*  border-radius:10px;
        width:16.75rem;
        height:9.75rem; */
        transform: scale(0.8);
    }
    .dream .swiper-slide img{
      width:16.75rem;
      height:9.75rem;
      margin: 0 auto;
      border-radius:10px;
      /* margin-left: 20px; */
    }
    .dream .swiper-slide-active,.dream .swiper-slide-duplicate-active{transform: scale(1);}
    .dreamUp{width:100%;height:2.4rem;background:url(img/dream_03.png) no-repeat;
      background-size:100% 100%;display: flex;justify-content: space-between;align-items: center;margin-top:-0.1rem;}
    .dreamUp div{height:2rem;width:50%;color:#fff;font-size:0.9rem;text-align:center;margin-left:1rem;margin-top:0.35rem;}
    .dreamUp div:nth-of-type(2){width:5rem;height:2rem;}
    .dreamList{width:100%;height:2.675rem;background:url(img/dream_04.png) no-repeat;
      background-size:100% 100%;overflow-x: auto;white-space: nowrap;padding-top:1.25rem;}
    .dreamIcon{width:5.0rem;height:2.25rem;background: url('img/tipBlue.png') no-repeat;background-size: 100% 100%;margin-left:0.55rem;display: inline-block;}
    .dreamList div.active{width:5.0rem;height:2.25rem;background: url('img/tipYellow.png') no-repeat;background-size: 100% 100%;margin-left:0.75rem;display: inline-block;text-shadow: #be5e00 0px 1px 2px;}
    .dreamList div{position: relative;}
    .dreamList div .one{position: absolute;top:0.2rem;left:0.75rem;font-size:0.7rem;color:#fff;font-weight: bold;overflow-x: auto;width:3.5rem;}
    .dreamList div .two{position: absolute;bottom:0.3rem;display:block;left:50%;font-size:0.6rem;color:#fff;text-align:center;margin-left:-1.5rem;}
    .dreamTv{width:100%;height:100%;background: url('img/tv.png') no-repeat;background-size: 100% 100%;margin-top:-0.05rem;}

    .dreamTv .swiper-slide{width:14.0rem;height:7.5rem;margin-top:0.75rem;}
    .dreamTv .swiper-slide img{width:14.0rem;height:6rem;margin-left:1.5rem;border:2px solid #000;border-radius:0.25rem}
    .dreamTv .swiper-pagination-bullet{opacity: 1; width:0.45rem; height:0.45rem; background: #fff; border: 2px solid #0d0e55; }
    .dreamTv .swiper-pagination-bullet-active {opacity: 1; width:0.45rem; height:0.45rem; border-radius:50px; background: #f95350; }
    .dreamTv .swiper-container-horizontal>.swiper-pagination-bullets, .swiper-pagination-custom, .swiper-pagination-fraction {position: absolute; bottom:5px; left:6.25rem; width: 100%; }
    .moreList{width:100%;padding:1rem 0rem;background:url(img/dream_04.png) no-repeat;
    background-size:100% 100%;margin-top:-0.1rem;padding-top:0.85rem;}
    .moreList .listImg{width:17.25rem;height:8.125rem;margin:0 auto;box-shadow: -1px -1px 10px #0d0e55;margin-bottom:0.75rem;position:relative;}
    .moreList .listImg img{width:17.25rem;height:8.125rem;border-radius: 0.25rem;border:2px solid #0d0e55;}
    .moreList .listImg .left{position:absolute;bottom:0.35rem;left:0.25rem;font-size: 0.6rem;color:#fff;opacity:0.8}
    .moreList .listImg .right{position:absolute;bottom:0.35rem;right:0.25rem;font-size: 0.6rem;color:#fff;opacity:0.8}
    .dreamFotter{width:100%;height:2.5rem;background:url(img/dream_04.png) no-repeat;
    background-size:100% 100%;margin-top:-0.1rem;text-align:center;color:#306aed;}
        
        .content1 {
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 0 .75rem;
            background: #fff;
            font-size: .65rem;
            color: #000;
        } 
        .card-pros,
        .card-cons {
            overflow: hidden;
            position: relative;
            left: 50%;
            width: 12.5rem;
            height: 7.5rem;
            background: #eee;
            border-radius: .25rem;
            margin-left: -6.25rem;
            background:url("img/kuang.png") no-repeat;
            background-size: 100% 100%;
            display: flex;align-items: center
        }
        .card-pros img,
        .card-cons img{
            width: 10rem;
            height: 6.5rem;
            margin: 0 auto;
            display: inline-block;
            align-items: center;
        }
        .file {
          position: absolute;
          display: inline-block;
          width: 10rem;
          height: 6.5rem;
          border-radius: 50%;
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
          margin: auto;
          z-index: 999;
          outline: none;
          /* background: rgba(0,0,0,0); */
          opacity: 0;
        }
        .footer a {
            position: absolute;
            bottom: 0;
            left: 0;
            display: block;
            width: 100%;
            height: 2.5rem;
            line-height: 2.5rem;
            background: #ff7e00;
            color: #fff;
            font-size: .85rem;
            text-align: center;
            z-index: 999;
        }
</style>
</head>
<body>
<div class="main">
    <div class="content1">
        <div class="card-pros">
            <img id="card-1" src="../images/userInfo/noIdCard_01.png"/><input type="file" class="file file-1" accept="image/*" multiple/>
        </div>
        <p style="color:#666">点击上传证件持有人信息页</p>
        <div class="card-cons">
          <img id="card-2" src="../images/userInfo/noIdCard_02.png"/><input type="file" class="file file-2" accept="image/*" multiple/>
        </div>
        <p style="color:#666">点击上传证件类型页</p>
    </div>
    <div class="footer">
        <a href="javascript:;" style="background: #0757b2">下一步</a>
    </div>
    <div class="dreamList">
       <!-- <div class="dreamIcon active">
        <span class="one">添富星期二</span>
        <span class="two">大咖直播</span>
       </div>
       <div class="dreamIcon">
        <span class="one">添财演说家</span>
        <span class="two">基金脱口秀</span>
       </div>
       <div class="dreamIcon"></div>
       <div class="dreamIcon"></div>
       <div class="dreamIcon"></div> -->
    </div>
    <div class="moreList">
      <!-- <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div> -->
     <!--  <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div>
      <div class="listImg">
        <img src="img/dream_01.png" alt="">
        <span class="left">120000次播放</span>
        <span class="right">06:00</span>
      </div> -->
    </div>
    <div class="dreamFotter">已经到底了</div>
</div>
<script src="js/jquery.3.4.1.min.js"></script>
<script src="js/swiper-4.2.2.min.js"></script>
<script src="/tradeh5/newWap/base/js/utils.js"></script> 
<script>


    $(".file-1").change(function () {
        showPhone("#card-1", this);
    });
    $(".file-2").change(function () {
        showPhone("#card-2", this);
    });


    function showPhone(panel, obj){
        var fileList = obj.files;
        for(var i=0; i<fileList.length; i++){
            var reader = new FileReader();
            reader.readAsDataURL(fileList[i]);
            reader.onload = function (ev) {
                var imgResult = ev.target.result;
                $(panel).attr("src", imgResult);
            }
        }
    }

    function nextStep() {
        var file1 = $(".file-1").get(0).files[0];
        var file2 = $(".file-2").get(0).files[0];

        var fileall=[];  //存放图片的容器

        var idTp=utils.getUrlParam("idTp");
        console.log('idTp=',idTp);

        // if(!file1) {
        //     alertTips3("证件持有人信息页不能为空", "", "知道了");
        //     return;
        // }
        // if(!file2) {
        //     alertTips3("证件类型页不能为空", "", "知道了");
        //     return;
        // }
        
        fileall.push(file1);
        fileall.push(file2)

        // console.log(file1);
        // console.log(fileall);
        
        var frontIdPicSize=file1.size;
        var backIdPicSize=file2.size;

        console.log("frontIdPicSize",frontIdPicSize);
        console.log("backIdPicSize",backIdPicSize);

        var formData = new FormData();

        // 证件类型(M-未认证，0-身份证，1-护照，2-军官证，3-士兵证，4-港澳通行证，5-户口本，6-外国人永久居留证，7-其他，8-文职证，9-警官证)
        for(var i=0;i<fileall.length;i++){
           formData.append("files", fileall[i]);
        } 
        // formData.append("files", file1);
        // formData.append("filesSize", file1.size / 1000);
        // formData.append("filesSize", file2.size / 1000);
        // formData.append("idTp", idTp);

        // App.uploadFile('/mobile-bff/v1/account/upload-cust-cert-pic?idTp='+idTp, formData, function (res) {
        //     console.log(res);
        // });
        
        console.log(formData);

        $.ajax({
            url: `/mobile-bff/v1/account/upload-cust-cert-pic?idTp=`+idTp,
            type: "POST",
            data: formData, // 上传formdata封装的数据
            // headers: {
            //     Accept: "application/json; charset=utf-8"
            // },
            dataType: 'JSON',
            cache: false,                      // 不缓存
            // contentType:'multipart/form-data',
            // mimeType: "multipart/form-data",
            processData: false,//告诉jq不要处理发送的数据
            contentType: false,//告诉jq不要设置content-Type请求头
            success: function(res) {
                console.log(res);
                if(res.returnCode==0){
                    if(res.body){
                        var front = res.body.userIdPicPathFront; //手持照片正面路径
                        var back = res.body.userIdPicPathBack; //手持照片反面路径
                        // alertTips3("上传成功", "", "知道了");
                        window.location.href = "./index.html?idTp="+idTp+'&front='+front+'&back='+back + location.search; //上传成功跳转到手持照片上传页
                    }
                }else{
                    alert(res.returnMsg, "", "知道了");
                }
            },
            error:function(){
                alert("上传失败", "", "知道了");
            }
        });
        
        //  $.ajax({
        //   url: `/mobile-bff/v1/account/upload-cust-cert-pic-finish`,
        //   type: "POST",
        //   data: params,
        //   success: function(result) {
        //       console.log(result);
        //       if(result.returnCode==0){
        //           alert("上传并提交成功");
        //       }else{
        //           alert(result.returnMsg);
        //       }
        //   },
        //   error:function(){
        //       alert("提交失败");
        //   }
        // });


        // $.ajax({
        //     url: `/mobile-bff/v1/account/upload-cert-pic-hand-hold`,
        //     type: "POST",
        //     data: formData, // 上传formdata封装的数据
        //     dataType: 'JSON',
        //     cache: false,                      // 不缓存
        //     // contentType:'multipart/form-data',
        //     // mimeType: "multipart/form-data",
        //     processData: false,//告诉jq不要处理发送的数据
        //     contentType: false,//告诉jq不要设置content-Type请求头
        //     success: function(res) {
        //         console.log(res);
        //         if(res.returnCode===0){
        //             //获取到上传图片路径后点击提交-执行提交操作
        //             if(res.body&&result.body.userIdPicPath){
        //                 var  handHoldIdPath=result.body.userIdPicPath; //手持照片路径
        //                 $.ajax({
        //                   url: `/mobile-bff/v1/account/upload-cust-cert-pic-finish`,
        //                   type: "POST",
        //                   data:{
        //                       backIdPath:"mobile_idno_1030945969_20211028143724856_00.jpg",
        //                       backIdPicSize:"b",
        //                       frontIdPath:"mobile_idno_1030945969_20211028143724856_00.jpg",
        //                       frontIdPicSize: "d",
        //                       handHoldIdPath:handHoldIdPath,
        //                       handHoldIdPicSize: "g",
        //                   },
        //                   success: function(result) {
        //                       console.log(result);
        //                       if(result.returnCode==0){
        //                           alert("上传并提交成功");
        //                       }else{
        //                           alert(result.returnMsg);
        //                       }
        //                   },
        //                   error:function(){
        //                       alert("提交失败");
        //                   }
        //               });
        //             }
        //             // alertTips3("上传成功");
        //         }else{
        //             alert(res.returnMsg);
        //         }
        //     },
        //     error:function(){
        //         alert("上传失败");
        //     }
        // });


        // utils.setCookie('file1',file1);
        // App.setSession("file1",file1)
        // window.location.href = "./holdIdCard.html?file1=" + file1;
        // utils.setSession("file1",file1);
        // window.location.href = "./holdIdCard.html" + location.search;

        // var reader = new FileReader();
        //  reader.readAsDataURL(file1);//转化二进制流，异步方法

        // formData.append("back", file2);
        // formData.append("frontIdPicSize", file1.size / 1000);
        // formData.append("backIdPicSize", file2.size / 1000);
        // formData.append("operType", "01");
        // App.uploadFile(App.applicationNm + "uploadIdCard", formData, function (res) {
        //     // window.location.href = "./parfectInfo.html" + location.search;
        //     window.location.href = "./holdIdCard.html" + location.search;
        // });
        // App.uploadFile('/mobile-bff/v1/account/upload-cust-cert-pic?idTp='+idTp, formData, function (res) {
        //     console.log(res);
        // });
      }

      $(".footer").click(function () {
        nextStep();
      });

 // var url = "http://local.99fund.com.cn:3000/tradeh5/newWap/Wap/dreamWorks/progressLive.html?tags=1";

 //  function getUrlParam(name) {
 //  var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
 //  var r = window.location.search.substr(1).match(reg); //匹配目标参数
 //  if (r != null) return unescape(r[2]);
 //  return ''; //返回参数值
 //  }

 // var tags=this.getUrlParam("tags");

  var tags=utils.getUrlParam("tags");


  // var aa=decodeURIComponent(atob(tags))

  // var tags=decodeURIComponent(utils.getUrlParam("tags"));
  
  // var num=utils.getCookie("num");

  // var num=0;
  var infoList2=[];  //天天向上直播间 
  // 获取相关Id;
  function getInfo(){   
      utils.get('/res/v1/app-func-layout/location-info?layoutId=dreamWorksHome', null, function (result) {
            if (result.returnCode == 0) {
                infoList2=result.body.appLayoutFuncInfoList.filter(function(item) {//天天向上直播间
                 return item.temId=='dreamWorksTabVideoList';
                });
                infoList2.forEach(function(item){   //天天向上直播间
                    getAdviceRelateId2(item.temId,item.funcmodId); 
                })
        
                
            }else if (result && result.returnCode != 9999) {
                alert(result.returnMsg)
            }else {
                alert(result.returnMsg)
            }
      });
  }
  getInfo();

  // 获取天天向上直播间相关标签;
  function getAdviceRelateId2(temId,funcmodId){
      utils.get('/res/v1/app-func-layout/theme-infos-app?layoutId='+temId+'&funcModId='+funcmodId, null, function (result) {
            if (result.returnCode == 0) {
              var objList2=[];
              var objhtml2= "";
              if(result.body.length>0){
                  objList2=result.body[0].object;
                  objList2.forEach(function (item,index) {
                    objhtml2 += '<div class="dreamIcon" data="'+index+'"><span class="one">'+item.adviceTitle+'</span><span class="two">'+item.adviceDesc.substr(0,5)+'</span></div>'
                  })
              }else{
                var objhtml2= "";
              }
              
              $(".dreamList").html(objhtml2);
              
              
              // console.log(num);
             
              // if(num==0){
              //   $(".dreamIcon .one").parent().eq(num).addClass('active');
              

              //    getVideo2($(".one").eq(num).text());
              // }
              
              $(".dreamIcon .one").each(function(index, el) {   //传过来的参数是哪个，选中哪个值                             
                var str=[]
                str.push($(el).text());

                if(str.indexOf(tags) > -1){
                    $(el).parent().addClass('active');
                    getVideo2(tags);
                }

                // if($(el).text().includes(tags)){
                //   $(el).parent().addClass('active');
                //   getVideo2(tags);
                // }
              });
              
              // $(".dreamIcon").eq(0).addClass('active');
              // if($(".dreamIcon").eq(0).attr("data")==0){
              //   var str=$(".one").eq(0).text();
              //     getVideo2(str);
              // }

              $('.dreamList .dreamIcon').click(function () {
                  if ($(this).hasClass("active")) {
                      return;
                  }
                  $(this).addClass("active").siblings().removeClass('active');
                  var name=$(this).find('.one').text();
                  getVideo2(name);
              });
            }else if (result && result.returnCode != 9999) {
                alert(result.returnMsg)
            }else {
                alert(result.returnMsg)
            }
      });   
  }


  //天天向上直播间
  function getVideo2(tags) {
    console.log(tags);
    $(".moreList").html('');
      utils.get('/cms-service/v1/vedio/vedios-simple?tags='+tags, null, function (result) {
          if (result.returnCode == 0) {
              var list2=[];
              var html2= "";
              list2=result.body;
           
              for(var i=0;i<list2.length;i++){
                // html2 += '<div class="swiper-slide" style="position:relative"><a href="'+list2[i].detailUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left">'+list2[i].hits+'</span><span class="right">'+list2[i].mins+'</span></a></div>' 

              // html2 +='<div class="listImg"><a href="'+list2[i].detailUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left">'+list2[i].hits+'次播放</span><span class="right">'+list2[i].mins+':00</span></a></div>'


                  if(isApp()){
                        if(list2[i].detailUrl.slice(0, 13)!= 'htffundxjb://'&&list2[i].isLive==1){
                              
                              html2 +='<div class="listImg"><a href="'+list2[i].url+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                        }
                        else if(list2[i].detailUrl.slice(0, 13)!= 'htffundxjb://'&&list2[i].isLive==2){
                              
                              html2 +='<div class="listImg"><a href="htffundxjb://action?type=media&subType=liveXE&videoId='+ list2[i].videoId+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                          }
                        else{
                              html2 += '<div class="listImg"><a href="htffundxjb://action?type=url&link='+ btoa(list2[i].detailUrl)+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'

                          }
                    }else{
                        html2 += '<div class="listImg"><a href="'+list2[i].shareLinkUrl+'"><img src="'+list2[i].picture+'" alt=""><span class="left"></span><span class="right"></span></a></div>'
                    }

              }
              
              $(".moreList").html(html2);

          }else if (result && result.returnCode != 9999) {
              alert(result.returnMsg)
          }else {
              alert(result.returnMsg)
          }
      });
    }

  var mySwiper = new Swiper ('.dreamTv .swiper-container', {
            direction: 'horizontal',
            loop: true,
            autoplay:30000,
            autoplay:{disableOnInteraction: false},
            // 如果需要分页器
            pagination: {
                el: '.swiper-pagination'
            }
  });

  // $('.dreamList .dreamIcon').click(function () {
  //     if ($(this).hasClass("active")) {
  //         return;
  //     }
  //     $(this).addClass("active").siblings().removeClass('active');
  //     // $(this).parent().next("qiehuan").hide().eq($(this).index()).show();
  //     // $(this).parent().siblings().hide().eq($(this).index()).show()
  // });

</script>
</body>
</html>